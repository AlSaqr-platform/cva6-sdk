# OpenOCD Configuration Script

# Print and source interface configuration
if { [info exists _INTERFACE] } {
    if { [catch {source [find interface/${_INTERFACE}.cfg]} err] } {
        echo "Error sourcing interface configuration: $err"
        exit 1
    }
} else {
    echo "Error: _INTERFACE variable not set."
    exit 1
}

# Print and source board configuration
if { [info exists _BOARD] } {
    if { [catch {source [find board/${_BOARD}.cfg]} err] } {
        echo "Error sourcing board configuration: $err"
        exit 1
    }
} else {
    echo "Error: _BOARD variable not set."
    exit 1
}

# Print and source target configuration
if { [info exists _TARGET] } {
    if { [catch {source [find target/${_TARGET}.cfg]} err] } {
        echo "Error sourcing target configuration: $err"
        exit 1
    }
} else {
    echo "Error: _TARGET variable not set."
    exit 1
}

echo "Configuration done!"

# GDB configuration
gdb_report_data_abort enable
gdb_report_register_access_error enable

